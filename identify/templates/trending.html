{% extends 'channels/base.html' %}
{% block content %}
  <head>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">

        var prepopular = "{{popular}}";
        console.log(prepopular)
        var popular = JSON.parse(prepopular.replace(/&quot;/g,'"'));
        console.log(popular)

        google.charts.load('current', {'packages':['timeline']});
        google.charts.setOnLoadCallback(drawChart);

        function drawChart() {
          var container = document.getElementById('timeline');
          var chart = new google.visualization.Timeline(container);

          var data = new google.visualization.DataTable();
          data.addColumn('string', 'Celebrity Name');
          data.addColumn('number', 'Start');
          data.addColumn('number', 'End');

          data.addRows(150);

          var i;
          for (i = 0; i < 150; i++) {
            data.setCell(i, 0, popular[i]['celebrity']);
            console.log(popular[i]['celebrity'])
            data.setCell(i, 1, 0);
            data.setCell(i, 2, popular[i]['number_of_chosen_as_target']);
            console.log(popular[i]['number_of_chosen_as_target'])
          }
             chart.draw(data);
         }
      
    </script>
  </head>

  <body>
    <section class="jumbotron text-center">
      <div class="container">
        <h1 class="jumbotron-heading">Trending</h1>
      </div>
    </section>

      <div id="timeline"  style="height: 500px;"></div>
  </body>
{% endblock %}